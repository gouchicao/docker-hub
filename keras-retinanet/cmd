# 构建
## 构建容器镜像
sudo docker build -t gouchicao/keras-retinanet .

## 上传容器镜像
sudo docker push gouchicao/keras-retinanet:latest

## 运行容器
sudo docker run -it --runtime=nvidia --name=keras-retinanet -p 8888:8888 -p 8008:8008 \
                -v /home/wjunjian/ailab/datasets/helmet/tmp:/keras-retinanet/project \
                gouchicao/keras-retinanet bash
## 删除容器
sudo docker rm keras-retinanet


# 容器内操作
## voc转csv格式
python voc2csv.py --data_dir=project/labelimg/ --output_dir=project/dataset

## 模型训练 --multi-gpu-force --multi-gpu 2 --batch-size 2
python keras_retinanet/bin/train.py --snapshot-path project/models \
    csv project/dataset/train.csv project/dataset/class.csv --val-annotations project/dataset/val.csv

## 模型评估
python keras_retinanet/bin/evaluate.py csv project/dataset/val.csv project/dataset/class.csv \
    project/models/resnet50_csv_01.h5 --convert-model

## 模型转换
python keras_retinanet/bin/convert_model.py --no-class-specific-filter \
    project/models/resnet50_csv_01.h5 project/models/retinanet_inference.h5

## 模型调试
python keras_retinanet/bin/debug.py csv project/dataset/val.csv project/dataset/class.csv \

